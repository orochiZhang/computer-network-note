<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1099px" preserveAspectRatio="none" style="width:371px;height:1099px;" version="1.1" viewBox="0 0 371 1099" width="371px" zoomAndPan="magnify"><defs><filter height="300%" id="f9e69qb7q4mxb" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="70" x2="70" y1="41.1201" y2="1056.2432"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="292" x2="292" y1="41.1201" y2="1056.2432"/><rect fill="#FEFECE" filter="url(#f9e69qb7q4mxb)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="50" x="43" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="36" x="50" y="26.0439">Client</text><rect fill="#FEFECE" filter="url(#f9e69qb7q4mxb)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="50" x="43" y="1055.2432"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="36" x="50" y="1078.2871">Client</text><rect fill="#FEFECE" filter="url(#f9e69qb7q4mxb)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="262" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="269" y="26.0439">Server</text><rect fill="#FEFECE" filter="url(#f9e69qb7q4mxb)" height="33.1201" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="262" y="1055.2432"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="269" y="1078.2871">Server</text><rect fill="#EEEEEE" filter="url(#f9e69qb7q4mxb)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="356" x="3" y="72.9973"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="359" y1="72.9973" y2="72.9973"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="359" y1="75.9973" y2="75.9973"/><rect fill="#EEEEEE" filter="url(#f9e69qb7q4mxb)" height="25.7544" style="stroke: #000000; stroke-width: 2.0;" width="74" x="144" y="61.1201"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="56" x="150" y="80.0181">三次握手</text><rect fill="#FBFB77" filter="url(#f9e69qb7q4mxb)" height="25" style="stroke: #A80036; stroke-width: 1.0;" width="60" x="40" y="101.8745"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="44" y="120.7725">主动打开</text><rect fill="#FBFB77" filter="url(#f9e69qb7q4mxb)" height="25" style="stroke: #A80036; stroke-width: 1.0;" width="43" x="270" y="137.6289"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="35" x="274" y="156.5269">Listen</text><polygon fill="#A80036" points="280,188.1377,290,192.1377,280,196.1377,284,192.1377" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="70" x2="286" y1="192.1377" y2="192.1377"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="77" y="187.2813">SYN=1, seq=x</text><rect fill="#FBFB77" filter="url(#f9e69qb7q4mxb)" height="25" style="stroke: #A80036; stroke-width: 1.0;" width="73" x="33" y="205.1377"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="65" x="37" y="224.0356">SYN-SENT</text><rect fill="#FBFB77" filter="url(#f9e69qb7q4mxb)" height="25" style="stroke: #A80036; stroke-width: 1.0;" width="75" x="254" y="240.8921"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="67" x="258" y="259.79">SYN-RCVD</text><polygon fill="#A80036" points="81,291.4009,71,295.4009,81,299.4009,77,295.4009" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="75" x2="291" y1="295.4009" y2="295.4009"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="87" y="290.5444">SYN=1, seq=y, ACK=1, ack=x+1</text><rect fill="#FBFB77" filter="url(#f9e69qb7q4mxb)" height="25" style="stroke: #A80036; stroke-width: 1.0;" width="74" x="33" y="308.4009"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="37" y="327.2988">established</text><polygon fill="#A80036" points="280,358.9097,290,362.9097,280,366.9097,284,362.9097" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="70" x2="286" y1="362.9097" y2="362.9097"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="77" y="358.0532">ACK=1, seq=x+1, ack=y+1</text><rect fill="#FBFB77" filter="url(#f9e69qb7q4mxb)" height="25" style="stroke: #A80036; stroke-width: 1.0;" width="74" x="255" y="375.9097"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="259" y="394.8076">established</text><rect fill="#EEEEEE" filter="url(#f9e69qb7q4mxb)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="356" x="3" y="428.5413"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="359" y1="428.5413" y2="428.5413"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="359" y1="431.5413" y2="431.5413"/><rect fill="#EEEEEE" filter="url(#f9e69qb7q4mxb)" height="25.7544" style="stroke: #000000; stroke-width: 2.0;" width="74" x="144" y="416.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="56" x="150" y="435.562">数据传输</text><polygon fill="#A80036" points="81,472.1729,71,476.1729,81,480.1729,77,476.1729" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="280,472.1729,290,476.1729,280,480.1729,284,476.1729" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="75" x2="286" y1="476.1729" y2="476.1729"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="87" y="471.3164">数据传输</text><rect fill="#EEEEEE" filter="url(#f9e69qb7q4mxb)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="356" x="3" y="506.05"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="359" y1="506.05" y2="506.05"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="359" y1="509.05" y2="509.05"/><rect fill="#EEEEEE" filter="url(#f9e69qb7q4mxb)" height="25.7544" style="stroke: #000000; stroke-width: 2.0;" width="74" x="144" y="494.1729"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="56" x="150" y="513.0708">四次挥手</text><rect fill="#FBFB77" filter="url(#f9e69qb7q4mxb)" height="25" style="stroke: #A80036; stroke-width: 1.0;" width="74" x="33" y="534.9272"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="37" y="553.8252">established</text><rect fill="#FBFB77" filter="url(#f9e69qb7q4mxb)" height="25" style="stroke: #A80036; stroke-width: 1.0;" width="74" x="255" y="570.6816"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="66" x="259" y="589.5796">established</text><polygon fill="#A80036" points="280,621.1904,290,625.1904,280,629.1904,284,625.1904" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="70" x2="286" y1="625.1904" y2="625.1904"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="77" y="620.334">FIN = 1, seq=u</text><rect fill="#FBFB77" filter="url(#f9e69qb7q4mxb)" height="25" style="stroke: #A80036; stroke-width: 1.0;" width="59" x="40" y="638.1904"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="44" y="657.0884">fin wait-1</text><rect fill="#FBFB77" filter="url(#f9e69qb7q4mxb)" height="25" style="stroke: #A80036; stroke-width: 1.0;" width="66" x="259" y="673.9448"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="58" x="263" y="692.8428">close wait</text><polygon fill="#A80036" points="81,724.4536,71,728.4536,81,732.4536,77,728.4536" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="75" x2="291" y1="728.4536" y2="728.4536"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="87" y="723.5972">ACK=1, seq=v, ack=u+1</text><rect fill="#FBFB77" filter="url(#f9e69qb7q4mxb)" height="25" style="stroke: #A80036; stroke-width: 1.0;" width="59" x="40" y="741.4536"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="51" x="44" y="760.3516">fin wait-2</text><polygon fill="#A80036" points="81,791.9624,71,795.9624,81,799.9624,77,795.9624" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="280,791.9624,290,795.9624,280,799.9624,284,795.9624" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="75" x2="286" y1="795.9624" y2="795.9624"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="87" y="791.106">数据传输</text><rect fill="#FBFB77" filter="url(#f9e69qb7q4mxb)" height="25" style="stroke: #A80036; stroke-width: 1.0;" width="125" x="229" y="808.9624"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="233" y="827.8604">被动关闭从这里开始</text><polygon fill="#A80036" points="81,859.4712,71,863.4712,81,867.4712,77,863.4712" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="75" x2="291" y1="863.4712" y2="863.4712"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="198" x="87" y="858.6147">FIN = 1, ACK=1, seq=w, ack=u+1</text><rect fill="#FBFB77" filter="url(#f9e69qb7q4mxb)" height="25" style="stroke: #A80036; stroke-width: 1.0;" width="60" x="262" y="876.4712"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="266" y="895.3691">last ACK</text><polygon fill="#A80036" points="280,926.98,290,930.98,280,934.98,284,930.98" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="70" x2="286" y1="930.98" y2="930.98"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="77" y="926.1235">ACK=1, seq=u+1, ack=w+1</text><rect fill="#FBFB77" filter="url(#f9e69qb7q4mxb)" height="25" style="stroke: #A80036; stroke-width: 1.0;" width="39" x="272" y="943.98"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="276" y="962.8779">close</text><rect fill="#FBFB77" filter="url(#f9e69qb7q4mxb)" height="25" style="stroke: #A80036; stroke-width: 1.0;" width="124" x="8" y="979.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="12" y="998.6323">timewait(等待2MSL)</text><rect fill="#FBFB77" filter="url(#f9e69qb7q4mxb)" height="25" style="stroke: #A80036; stroke-width: 1.0;" width="39" x="50" y="1015.4888"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="54" y="1034.3867">close</text><!--
@startuml
== 三次握手 ==
rnote over Client : 主动打开
rnote over Server : Listen

Client -> Server : SYN=1, seq=x
rnote over Client : SYN-SENT

rnote over Server : SYN-RCVD
Server -> Client : SYN=1, seq=y, ACK=1, ack=x+1

rnote over Client : established
Client -> Server : ACK=1, seq=x+1, ack=y+1
rnote over Server : established

== 数据传输 ==
Client <-> Server : 数据传输

== 四次挥手 ==
rnote over Client : established
rnote over Server : established
Client -> Server : FIN = 1, seq=u
rnote over Client : fin wait-1

rnote over Server : close wait
Server -> Client : ACK=1, seq=v, ack=u+1
rnote over Client : fin wait-2
Client <-> Server : 数据传输

rnote over Server : 被动关闭从这里开始
Server -> Client : FIN = 1, ACK=1, seq=w, ack=u+1
rnote over Server : last ACK
Client -> Server : ACK=1, seq=u+1, ack=w+1
rnote over Server : close

rnote over Client : timewait(等待2MSL)
rnote over Client : close

@enduml

PlantUML version 1.2019.03(Sun Mar 10 19:04:44 CST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_151-b12
Operating System: Windows 10
OS Version: 10.0
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>